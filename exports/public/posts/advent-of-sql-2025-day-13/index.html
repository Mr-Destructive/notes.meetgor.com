<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"><head>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en-us">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>Advent of SQL 2025 Day 13: XML Travel Manifests &middot; Notes</title>
    <meta name="title" content="Advent of SQL 2025 Day 13: XML Travel Manifests &middot; Notes">
  

  
  
    <meta name="description" content="A collection of technical notes and posts">
  
  
    <meta name="keywords" content="sqlite,sql,advent-of-sql,">
  
  
  
  <link rel="canonical" href="/posts/advent-of-sql-2025-day-13/">
  

  
  
    <meta name="author" content="Meet Gor">
  
  

  
  <meta property="og:url" content="/posts/advent-of-sql-2025-day-13/">
  <meta property="og:site_name" content="Notes">
  <meta property="og:title" content="Advent of SQL 2025 Day 13: XML Travel Manifests">
  <meta property="og:description" content="Advent of SQL - Day 13, XML Travel Manifests # Its day 13 of Advent of SQL, we have some xml to parse, which I don’t think SQL can handle, but string manipulation to the rescue.
Let’s get the SQL for the day:
DROP TABLE IF EXISTS travel_manifests; CREATE TABLE travel_manifests ( manifest_id INT PRIMARY KEY, vehicle_id TEXT, departure_time TIMESTAMP, manifest_xml XML ); INSERT INTO travel_manifests (manifest_id, vehicle_id, departure_time, manifest_xml) VALUES (1, &#39;SLEIGH-01&#39;, &#39;2025-12-22 06:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (2, &#39;SLEIGH-07&#39;, &#39;2025-12-23 13:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (3, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 18:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Diego Ramos&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (4, &#39;TRAIN-ICE-3&#39;, &#39;2025-12-22 18:00:00&#39;, &#39;&lt;manifest&gt;&lt;reindeer_mood&gt;low&lt;/reindeer_mood&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Isla Torres&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (5, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 17:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Mateo Cruz&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;snowfall_inches&gt;ignored&lt;/snowfall_inches&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (6, &#39;CARGO-12&#39;, &#39;2025-12-22 15:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Lucas Ford&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (7, &#39;SLEIGH-01&#39;, &#39;2025-12-22 11:00:00&#39;, &#39;&lt;manifest&gt;&lt;snack_inventory&gt;unknown&lt;/snack_inventory&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Diego Ramos&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Lucas Ford&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (8, &#39;CARGO-12&#39;, &#39;2025-12-23 13:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Leo Becker&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (9, &#39;SLEIGH-01&#39;, &#39;2025-12-23 10:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (10, &#39;SLEIGH-01&#39;, &#39;2025-12-22 21:00:00&#39;, &#39;&lt;manifest&gt;&lt;snowfall_inches&gt;low&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ava Johnson&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Mateo Cruz&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Leo Becker&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (11, &#39;SLEIGH-07&#39;, &#39;2025-12-23 10:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (12, &#39;SLEIGH-01&#39;, &#39;2025-12-22 08:00:00&#39;, &#39;&lt;manifest&gt;&lt;reindeer_mood&gt;ok&lt;/reindeer_mood&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (13, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 11:00:00&#39;, &#39;&lt;manifest&gt;&lt;snowfall_inches&gt;ok&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (14, &#39;SLEIGH-01&#39;, &#39;2025-12-22 14:00:00&#39;, &#39;&lt;manifest&gt;&lt;engine_check&gt;high&lt;/engine_check&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (15, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 14:00:00&#39;, &#39;&lt;manifest&gt;&lt;snowfall_inches&gt;ok&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snowfall_inches&gt;ignored&lt;/snowfall_inches&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;); Just one table, with some wild XML.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-12-27T20:30:00+05:30">
    <meta property="article:modified_time" content="2026-01-04T15:49:51+05:30">
    <meta property="article:tag" content="Sqlite">
    <meta property="article:tag" content="Sql">
    <meta property="article:tag" content="Advent-of-Sql">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Advent of SQL 2025 Day 13: XML Travel Manifests">
  <meta name="twitter:description" content="Advent of SQL - Day 13, XML Travel Manifests # Its day 13 of Advent of SQL, we have some xml to parse, which I don’t think SQL can handle, but string manipulation to the rescue.
Let’s get the SQL for the day:
DROP TABLE IF EXISTS travel_manifests; CREATE TABLE travel_manifests ( manifest_id INT PRIMARY KEY, vehicle_id TEXT, departure_time TIMESTAMP, manifest_xml XML ); INSERT INTO travel_manifests (manifest_id, vehicle_id, departure_time, manifest_xml) VALUES (1, &#39;SLEIGH-01&#39;, &#39;2025-12-22 06:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (2, &#39;SLEIGH-07&#39;, &#39;2025-12-23 13:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (3, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 18:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Diego Ramos&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (4, &#39;TRAIN-ICE-3&#39;, &#39;2025-12-22 18:00:00&#39;, &#39;&lt;manifest&gt;&lt;reindeer_mood&gt;low&lt;/reindeer_mood&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Isla Torres&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (5, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 17:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Mateo Cruz&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;snowfall_inches&gt;ignored&lt;/snowfall_inches&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (6, &#39;CARGO-12&#39;, &#39;2025-12-22 15:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Lucas Ford&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (7, &#39;SLEIGH-01&#39;, &#39;2025-12-22 11:00:00&#39;, &#39;&lt;manifest&gt;&lt;snack_inventory&gt;unknown&lt;/snack_inventory&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Diego Ramos&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Lucas Ford&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (8, &#39;CARGO-12&#39;, &#39;2025-12-23 13:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Leo Becker&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (9, &#39;SLEIGH-01&#39;, &#39;2025-12-23 10:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (10, &#39;SLEIGH-01&#39;, &#39;2025-12-22 21:00:00&#39;, &#39;&lt;manifest&gt;&lt;snowfall_inches&gt;low&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ava Johnson&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Mateo Cruz&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Leo Becker&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (11, &#39;SLEIGH-07&#39;, &#39;2025-12-23 10:00:00&#39;, &#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (12, &#39;SLEIGH-01&#39;, &#39;2025-12-22 08:00:00&#39;, &#39;&lt;manifest&gt;&lt;reindeer_mood&gt;ok&lt;/reindeer_mood&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (13, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 11:00:00&#39;, &#39;&lt;manifest&gt;&lt;snowfall_inches&gt;ok&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (14, &#39;SLEIGH-01&#39;, &#39;2025-12-22 14:00:00&#39;, &#39;&lt;manifest&gt;&lt;engine_check&gt;high&lt;/engine_check&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;), (15, &#39;FLIGHT-NP-9&#39;, &#39;2025-12-22 14:00:00&#39;, &#39;&lt;manifest&gt;&lt;snowfall_inches&gt;ok&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snowfall_inches&gt;ignored&lt;/snowfall_inches&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;); Just one table, with some wild XML.">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.c61736128cfa071f52268b924e8b8c8dff7f9e962caae1e812053e9e023a4e1c1c95239d517406a4002933de9dd5ad84667956aa9d4230a25024e7e502058ca1.css"
    integrity="sha512-xhc2Eoz6Bx9SJouSTouMjf9/npYsquHoEgU&#43;ngI6ThwclSOdUXQGpAApM96d1a2EZnlWqp1CMKJQJOflAgWMoQ==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.67624a357c928d29b9fe19ba01a1e32c05ad1329ca2a712bf10446df0c6872903d0c14b21f76896b57a5a0710940805416cee38851d9067db6555881188e35a5.js"
      integrity="sha512-Z2JKNXySjSm5/hm6AaHjLAWtEynKKnEr8QRG3wxocpA9DBSyH3aJa1eloHEJQIBUFs7jiFHZBn22VViBGI41pQ=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  








  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Advent of SQL 2025 Day 13: XML Travel Manifests",
    "headline": "Advent of SQL 2025 Day 13: XML Travel Manifests",
    
    "inLanguage": "en-us",
    "url" : "/posts/advent-of-sql-2025-day-13/",
    "author" : {
      "@type": "Person",
      "name": "Meet Gor"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-12-27T20:30:00\u002b05:30",
    "datePublished": "2025-12-27T20:30:00\u002b05:30",
    
    "dateModified": "2026-01-04T15:49:51\u002b05:30",
    
    "keywords": ["sqlite","sql","advent-of-sql"],
    
    "mainEntityOfPage": "true",
    "wordCount": "1357"
  }]
  </script>



  
  
    




  

  
  

  
  

  
  

  
  
</head>


















  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      <div class="main-menu flex items-center w-full gap-2 p-1 pl-0">
  
  
    <a href="/" class="text-base font-medium truncate min-w-0 shrink">
      Notes
    </a>
  
  <div class="flex items-center ms-auto">
    <div class="hidden md:flex">
      <nav class="flex items-center gap-x-5 h-12">
  
    
      
  
    <a
      href="/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="Home"
      title="">
      
      
        <span class="text-base font-medium break-normal">
          Home
        </span>
      
    </a>
  

    
      
  
    <a
      href="/posts/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="Posts"
      title="">
      
      
        <span class="text-base font-medium break-normal">
          Posts
        </span>
      
    </a>
  

    
      
  
    <a
      href="/tags/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="Tags"
      title="">
      
      
        <span class="text-base font-medium break-normal">
          Tags
        </span>
      
    </a>
  

    
  

  

  

  
    <button
      id="search-button"
      aria-label="Search"
      class="text-base bf-icon-color-hover"
      title="Search (/)">
      <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
    </button>
  

  
    <div class="flex items-center">
      <button
        id="appearance-switcher"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base bf-icon-color-hover">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    </div>
  
</nav>



    </div>
    <div class="flex md:hidden">
      <div class="flex items-center h-14 gap-4">
  
    <button
      id="search-button-mobile"
      aria-label="Search"
      class="flex items-center justify-center bf-icon-color-hover"
      title="Search (/)">
      <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
    </button>
  

  
    <button
      id="appearance-switcher-mobile"
      type="button"
      aria-label="Dark mode switcher"
      class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400">
      <div class="dark:hidden">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
      </div>
      <div class="hidden dark:block">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
      </div>
    </button>
  

  
    <input type="checkbox" id="mobile-menu-toggle" autocomplete="off" class="hidden peer">
    <label for="mobile-menu-toggle" class="flex items-center justify-center cursor-pointer bf-icon-color-hover">
      <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
    </label>

    <div
      role="dialog"
      aria-modal="true"
      style="scrollbar-gutter: stable;"
      class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
      bf-scrollbar">
      <label
        for="mobile-menu-toggle"
        class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </label>
      <nav class="mx-auto max-w-md space-y-6">
        
  
    
    <div class="px-2">
      <a
        href="/"
        aria-label="Home"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="" class="text-2xl font-bold tracking-tight">
          Home
        </span>
        
      </a>

      
    </div>
  
    
    <div class="px-2">
      <a
        href="/posts/"
        aria-label="Posts"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="" class="text-2xl font-bold tracking-tight">
          Posts
        </span>
        
      </a>

      
    </div>
  
    
    <div class="px-2">
      <a
        href="/tags/"
        aria-label="Tags"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="" class="text-2xl font-bold tracking-tight">
          Tags
        </span>
        
      </a>

      
    </div>
  

        
  

        
  

      </nav>
    </div>
  
</div>







    </div>
  </div>
</div>





    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Advent of SQL 2025 Day 13: XML Travel Manifests
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-12-27T20:30:00&#43;05:30">December 27, 2025</time><span class="px-2 text-primary-500">&middot;</span><span>1357 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">7 mins</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Meet Gor
      </div>
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

  

  

  
    <div class="mb-5"></div>
  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      


      <div class="min-w-0 min-h-0 max-w-fit">
        
        <div class="article-content max-w-prose mb-20">
          
<h2 class="relative group">Advent of SQL - Day 13, XML Travel Manifests
    <div id="advent-of-sql---day-13-xml-travel-manifests" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#advent-of-sql---day-13-xml-travel-manifests" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Its day 13 of Advent of SQL, we have some xml to parse, which I don&rsquo;t think SQL can handle, but string manipulation to the rescue.</p>
<p>Let&rsquo;s get the SQL for the day:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">IF</span> <span style="color:#66d9ef">EXISTS</span> travel_manifests;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> travel_manifests (
</span></span><span style="display:flex;"><span>    manifest_id INT <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>    vehicle_id TEXT,
</span></span><span style="display:flex;"><span>    departure_time <span style="color:#66d9ef">TIMESTAMP</span>,
</span></span><span style="display:flex;"><span>    manifest_xml XML
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> travel_manifests (manifest_id, vehicle_id, departure_time, manifest_xml) <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;SLEIGH-01&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 06:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">2</span>, <span style="color:#e6db74">&#39;SLEIGH-07&#39;</span>, <span style="color:#e6db74">&#39;2025-12-23 13:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">3</span>, <span style="color:#e6db74">&#39;FLIGHT-NP-9&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 18:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Diego Ramos&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">4</span>, <span style="color:#e6db74">&#39;TRAIN-ICE-3&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 18:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;reindeer_mood&gt;low&lt;/reindeer_mood&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Isla Torres&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">5</span>, <span style="color:#e6db74">&#39;FLIGHT-NP-9&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 17:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Mateo Cruz&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;snowfall_inches&gt;ignored&lt;/snowfall_inches&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">6</span>, <span style="color:#e6db74">&#39;CARGO-12&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 15:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Lucas Ford&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">7</span>, <span style="color:#e6db74">&#39;SLEIGH-01&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;snack_inventory&gt;unknown&lt;/snack_inventory&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Diego Ramos&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Lucas Ford&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Carter Lewis&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">8</span>, <span style="color:#e6db74">&#39;CARGO-12&#39;</span>, <span style="color:#e6db74">&#39;2025-12-23 13:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Leo Becker&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">9</span>, <span style="color:#e6db74">&#39;SLEIGH-01&#39;</span>, <span style="color:#e6db74">&#39;2025-12-23 10:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;reindeer_mood&gt;ignored&lt;/reindeer_mood&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Hiro Tanaka&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">10</span>, <span style="color:#e6db74">&#39;SLEIGH-01&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 21:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;snowfall_inches&gt;low&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Ava Johnson&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Mateo Cruz&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Leo Becker&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">11</span>, <span style="color:#e6db74">&#39;SLEIGH-07&#39;</span>, <span style="color:#e6db74">&#39;2025-12-23 10:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">12</span>, <span style="color:#e6db74">&#39;SLEIGH-01&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 08:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;reindeer_mood&gt;ok&lt;/reindeer_mood&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Ravi Patel&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">13</span>, <span style="color:#e6db74">&#39;FLIGHT-NP-9&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;snowfall_inches&gt;ok&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Elena Morales&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">14</span>, <span style="color:#e6db74">&#39;SLEIGH-01&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 14:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;engine_check&gt;high&lt;/engine_check&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Layla Brooks&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;weather_note&gt;ignored&lt;/weather_note&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Anya Pavlov&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Keiko Ito&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Zara Sheikh&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>),
</span></span><span style="display:flex;"><span>  (<span style="color:#ae81ff">15</span>, <span style="color:#e6db74">&#39;FLIGHT-NP-9&#39;</span>, <span style="color:#e6db74">&#39;2025-12-22 14:00:00&#39;</span>, <span style="color:#e6db74">&#39;&lt;manifest&gt;&lt;snowfall_inches&gt;ok&lt;/snowfall_inches&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Priya Das&lt;/name&gt;&lt;ticket_class&gt;priority&lt;/ticket_class&gt;&lt;snowfall_inches&gt;ignored&lt;/snowfall_inches&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Bianca Pereira&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;&#39;</span>);</span></span></code></pre></div></div>
<p>Just one table, with some wild XML.</p>
<p>Let&rsquo;s see what do we want to do in the problem statement.</p>

<h2 class="relative group">Problem
    <div id="problem" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#problem" aria-label="Anchor">#</a>
    </span>
    
</h2>
<blockquote><p>Using the <code>travel_manifests</code> table, extract the passenger information from the XML data and produce a report that shows all of the departure times for &ldquo;CARGO&rdquo; vehicles that have more than 20 passengers booked. Include in the results:</p>
<ul>
<li>The vehicle_id</li>
<li>The departure_time</li>
<li>The total number of passengers on that departure</li>
<li>Order the results by departure_time.</li>
</ul>
</blockquote><p>Ok, so we need the number of passengers in the records which are of type <code>CARGO</code> and have more than 20 passengers booked.</p>
<p>Interesting!</p>
<p>Let&rsquo;s look at one record.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sqlite&gt; .schema
</span></span><span style="display:flex;"><span>CREATE TABLE travel_manifests (
</span></span><span style="display:flex;"><span>    manifest_id INT PRIMARY KEY,
</span></span><span style="display:flex;"><span>    vehicle_id TEXT,
</span></span><span style="display:flex;"><span>    departure_time TIMESTAMP,
</span></span><span style="display:flex;"><span>    manifest_xml XML
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>sqlite&gt; SELECT * FROM travel_manifests WHERE id = 1;
</span></span><span style="display:flex;"><span>Parse error: no such column: id
</span></span><span style="display:flex;"><span>  SELECT * FROM travel_manifests WHERE id = 1;
</span></span><span style="display:flex;"><span>                         error here ---^
</span></span><span style="display:flex;"><span>sqlite&gt; SELECT * FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+-------------+------------+---------------------+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| manifest_id | vehicle_id |   departure_time    |                         manifest_xml                         |
</span></span><span style="display:flex;"><span>+-------------+------------+---------------------+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| 1           | SLEIGH-01  | 2025-12-22 06:00:00 | &lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;tick |
</span></span><span style="display:flex;"><span>|             |            |                     | et_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;nam |
</span></span><span style="display:flex;"><span>|             |            |                     | e&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;eng |
</span></span><span style="display:flex;"><span>|             |            |                     | ine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name |
</span></span><span style="display:flex;"><span>|             |            |                     | &gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;sna |
</span></span><span style="display:flex;"><span>|             |            |                     | ck_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passenge |
</span></span><span style="display:flex;"><span>|             |            |                     | rs&gt;&lt;/manifest&gt;                                               |
</span></span><span style="display:flex;"><span>+-------------+------------+---------------------+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>sqlite&gt; </span></span></code></pre></div></div>
<p>So, we have the following columns</p>
<ul>
<li><code>vehicle_id</code> which is I think related to filtering <code>CARGO</code> related vehicles only</li>
<li><code>departure_time</code> which we just return as is</li>
<li><code>manifest_xml</code>, oh! This is xml and it has passenger details.</li>
</ul>
<p>If we look carefully, we can see the xml looks like this:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;manifest&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;passengers&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;passenger&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;name&gt;</span>Nia Grant<span style="color:#f92672">&lt;/name&gt;</span> 
</span></span><span style="display:flex;"><span>           <span style="color:#f92672">&lt;ticket_class&gt;</span>overnight<span style="color:#f92672">&lt;/ticket_class&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/passenger&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;passenger&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;name&gt;</span>Sofia Kim<span style="color:#f92672">&lt;/name&gt;</span> 
</span></span><span style="display:flex;"><span>           <span style="color:#f92672">&lt;ticket_class&gt;</span>overnight<span style="color:#f92672">&lt;/ticket_class&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#f92672">&lt;engine_check&gt;</span>ignored<span style="color:#f92672">&lt;/engine_check&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;/passenger&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;passenger&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#f92672">&lt;name&gt;</span>Jonah Wolfe<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#f92672">&lt;ticket_class&gt;</span>standard<span style="color:#f92672">&lt;/ticket_class&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#f92672">&lt;snack_inventory&gt;</span>ignored<span style="color:#f92672">&lt;/snack_inventory&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">&lt;/passenger&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/passengers&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/manifest&gt;</span></span></span></code></pre></div></div>
<p>We have <code>manifest</code> which has a property of <code>passengers</code> which is a list of <code>passenger</code> tags, inside of which, each element of <code>passenger</code> has its details like <code>name</code>, <code>ticket_class</code>, etc.</p>
<p>We only want the count of <code>passengers</code>, how can we get that? The dirtiest way to do is to count the occurances of <code>&lt;passenger&gt;</code> or <code>&lt;/passenger&gt;</code> in the xml string.</p>
<p>We can do that with counting the full length of the xml string, and then dividing by the number of times the string can be replaced(which is the dirty part, there could be hidden <code>&lt;passenger&gt;</code> string somewhere that might break this logic, but if it is a valid xml, it works). We count the number of characters left after we replace the string <code>&lt;passenger&gt;</code> with empty string <code>''</code> so that we can get the difference of the total number of character and the number of characters occupied by the string <code>&lt;passenger&gt;</code>. This difference if we divide by the length of <code>&lt;passenger&gt;</code> will give us the count of the number of times the <code>&lt;passenger&gt;</code> string is present in the xml string.</p>
<p>Let&rsquo;s take an example from the above. The length of the xml string is 374.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">LENGTH</span>(manifest_xml) <span style="color:#66d9ef">FROM</span> travel_manifests <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;</span></span></code></pre></div></div>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sqlite&gt; SELECT LENGTH(manifest_xml) FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+----------------------+
</span></span><span style="display:flex;"><span>| LENGTH(manifest_xml) |
</span></span><span style="display:flex;"><span>+----------------------+
</span></span><span style="display:flex;"><span>| 374                  |
</span></span><span style="display:flex;"><span>+----------------------+
</span></span><span style="display:flex;"><span>sqlite&gt; </span></span></code></pre></div></div>
<p>Let&rsquo;s replace the occurances of <code>&lt;passenger&gt; with empty string in the </code>manifest_xml` string, like so:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">REPLACE</span>(manifest_xml, <span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#66d9ef">FROM</span> travel_manifests <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;</span></span></code></pre></div></div>
<p>Now, we can see the string <code>&lt;passenger&gt;</code> is gone from the returned result set. We can try getting its length now.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">LENGTH</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">REPLACE</span>(manifest_xml, <span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> travel_manifests <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;</span></span></code></pre></div></div>
<p>Now, it says <code>341</code> why? Because we removed (replaced with empty string) the occurences of <code>&lt;passenger&gt;</code>.</p>
<p>Let&rsquo;s get the length of <code>'&lt;passenger&gt;'</code> string, which should be <code>11</code> right?</p>
<p>Spell it <code>p-a-s-s-e-n-g-e-r</code> as <code>pass</code> + <code>enger</code> (4+5=9) and 2 for <code>&lt;&gt;</code> so 11. Sometimes I don&rsquo;t know how to do math, I use SQL.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>);</span></span></code></pre></div></div>
<p>There it is <code>11</code>.</p>
<p>Now, if you compute the difference of the actual length of XML with the removed parts of the <code>&lt;passenger&gt;</code> what do we get?</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">LENGTH</span>(manifest_xml) <span style="color:#f92672">-</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#66d9ef">REPLACE</span>(manifest_xml, <span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)) <span style="color:#66d9ef">FROM</span> travel_manifests <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;</span></span></code></pre></div></div>
<p>WE got <code>33</code>, why would you ask because <code>11</code> times 3 is <code>33</code>. We found three instances of <code>&lt;passenger&gt;</code>,  so we just need to divide by the length of <code>&lt;passenger&gt;</code> or hard code it as <code>11</code> doesn&rsquo;t matter.</p>
<p>We would get the number of occurances of <code>&lt;passenger&gt;</code> which will give the number of passenger in the xml string.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    (
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">LENGTH</span>(manifest_xml) <span style="color:#f92672">-</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#66d9ef">REPLACE</span>(manifest_xml, <span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>))
</span></span><span style="display:flex;"><span>    ) <span style="color:#f92672">/</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> travel_manifests <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">1</span>;</span></span></code></pre></div></div>
<p>Phew, its <code>3</code>!</p>
<p>That was a lot for a simple stuff. But hey its fun!</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sqlite&gt; SELECT (manifest_xml) FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>|                         manifest_xml                         |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| &lt;manifest&gt;&lt;passengers&gt;&lt;passenger&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;tick |
</span></span><span style="display:flex;"><span>| et_class&gt;overnight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;nam |
</span></span><span style="display:flex;"><span>| e&gt;Sofia Kim&lt;/name&gt;&lt;ticket_class&gt;overnight&lt;/ticket_class&gt;&lt;eng |
</span></span><span style="display:flex;"><span>| ine_check&gt;ignored&lt;/engine_check&gt;&lt;/passenger&gt;&lt;passenger&gt;&lt;name |
</span></span><span style="display:flex;"><span>| &gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt;standard&lt;/ticket_class&gt;&lt;sna |
</span></span><span style="display:flex;"><span>| ck_inventory&gt;ignored&lt;/snack_inventory&gt;&lt;/passenger&gt;&lt;/passenge |
</span></span><span style="display:flex;"><span>| rs&gt;&lt;/manifest&gt;                                               |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sqlite&gt; SELECT REPLACE(manifest_xml, &#39;&lt;passenger&gt;&#39;, &#39;&#39;) FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>|           REPLACE(manifest_xml, &#39;&lt;passenger&gt;&#39;, &#39;&#39;)           |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| &lt;manifest&gt;&lt;passengers&gt;&lt;name&gt;Nia Grant&lt;/name&gt;&lt;ticket_class&gt;ov |
</span></span><span style="display:flex;"><span>| ernight&lt;/ticket_class&gt;&lt;/passenger&gt;&lt;name&gt;Sofia Kim&lt;/name&gt;&lt;tic |
</span></span><span style="display:flex;"><span>| ket_class&gt;overnight&lt;/ticket_class&gt;&lt;engine_check&gt;ignored&lt;/eng |
</span></span><span style="display:flex;"><span>| ine_check&gt;&lt;/passenger&gt;&lt;name&gt;Jonah Wolfe&lt;/name&gt;&lt;ticket_class&gt; |
</span></span><span style="display:flex;"><span>| standard&lt;/ticket_class&gt;&lt;snack_inventory&gt;ignored&lt;/snack_inven |
</span></span><span style="display:flex;"><span>| tory&gt;&lt;/passenger&gt;&lt;/passengers&gt;&lt;/manifest&gt;                    |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>sqlite&gt; 
</span></span><span style="display:flex;"><span>sqlite&gt; SELECT LENGTH(REPLACE(manifest_xml, &#39;&lt;passenger&gt;&#39;, &#39;&#39;)) FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+--------------------------------------------------+
</span></span><span style="display:flex;"><span>| LENGTH(REPLACE(manifest_xml, &#39;&lt;passenger&gt;&#39;, &#39;&#39;)) |
</span></span><span style="display:flex;"><span>+--------------------------------------------------+
</span></span><span style="display:flex;"><span>| 341                                              |
</span></span><span style="display:flex;"><span>+--------------------------------------------------+
</span></span><span style="display:flex;"><span>sqlite&gt; SELECT LENGTH(manifest_xml) - LENGTH(REPLACE(manifest_xml, &#39;&lt;passenger&gt;&#39;, &#39;&#39;)) FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| LENGTH(manifest_xml) - LENGTH(REPLACE(manifest_xml, &#39;&lt;passen |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| 33                                                           |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>sqlite&gt; SELECT LENGTH(&#39;&lt;passenger&gt;&#39;) FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+-----------------------+
</span></span><span style="display:flex;"><span>| LENGTH(&#39;&lt;passenger&gt;&#39;) |
</span></span><span style="display:flex;"><span>+-----------------------+
</span></span><span style="display:flex;"><span>| 11                    |
</span></span><span style="display:flex;"><span>+-----------------------+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sqlite&gt; SELECT (LENGTH(manifest_xml) - LENGTH(REPLACE(manifest_xml, &#39;&lt;passenger&gt;&#39;, &#39;&#39;)))/LENGTH(&#39;&lt;passenger&gt;&#39;) FROM travel_manifests LIMIT 1;
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| (LENGTH(manifest_xml) - LENGTH(REPLACE(manifest_xml, &#39;&lt;passe |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>| 3                                                            |
</span></span><span style="display:flex;"><span>+--------------------------------------------------------------+
</span></span><span style="display:flex;"><span>sqlite&gt; </span></span></code></pre></div></div>
<p>Now, let construct the query to get the number of passengers.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    vehicle_id,
</span></span><span style="display:flex;"><span>    departure_time,
</span></span><span style="display:flex;"><span>    (
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">LENGTH</span>(manifest_xml)
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">-</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#66d9ef">REPLACE</span>(manifest_xml, <span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>))
</span></span><span style="display:flex;"><span>    ) <span style="color:#f92672">/</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>) <span style="color:#66d9ef">AS</span> passengers_in_manifest
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> travel_manifests
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> vehicle_id <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;CARGO-%&#39;</span>;</span></span></code></pre></div></div>
<p>We need to wrap it in a CTE to grab and group by the vehicle_id I believe, as there are similar entries.</p>
<p>Also we need to group the records with the same departure time, so that we can combine the number of passengers for that vehicle.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">WITH</span> passenger_counts <span style="color:#66d9ef">AS</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>        vehicle_id,
</span></span><span style="display:flex;"><span>        departure_time,
</span></span><span style="display:flex;"><span>        (
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">LENGTH</span>(manifest_xml)
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">-</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#66d9ef">REPLACE</span>(manifest_xml, <span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>))
</span></span><span style="display:flex;"><span>        ) <span style="color:#f92672">/</span> <span style="color:#66d9ef">LENGTH</span>(<span style="color:#e6db74">&#39;&lt;passenger&gt;&#39;</span>) <span style="color:#66d9ef">AS</span> passengers_in_manifest
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FROM</span> travel_manifests
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">WHERE</span> vehicle_id <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;CARGO-%&#39;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    vehicle_id,
</span></span><span style="display:flex;"><span>    departure_time,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">SUM</span>(passengers_in_manifest) <span style="color:#66d9ef">AS</span> total_passengers
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> passenger_counts
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> vehicle_id, departure_time
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">SUM</span>(passengers_in_manifest) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> departure_time;</span></span></code></pre></div></div>
<p>We count the number of passengers in the CTE and use it as a filter in the outer query as <code>SUM(passengers_in_manifest) &gt; 20</code> which will give the right condition for us to get the result. We have to use <code>HAVING</code> as we need to do that after grouping the same <code>vehicle_id</code> and records across same <code>departure_time</code>.</p>
<p>We also use the <code>vehicle_id LIKE 'CARGO-%'</code> in the CTE to filter it right at the inner query to avoid looping in all the queries for computing the number of passengers.</p>
<p>That solves this problem.</p>
<p>That&rsquo;s it from day 13 of Advent of SQL.</p>
<p>There are other ways, but its the same parsing, We can use JOINs and stuff, but hey that was not the point of this.</p>
<p>Anyways! See you tomorrow for day 14!</p>

          
          
          
        </div>
        
        
        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_posts/2025-12-27-advent-of-sql-day-13-xml-travel-manifests.md"
          data-oid-likes="likes_posts/2025-12-27-advent-of-sql-day-13-xml-travel-manifests.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span class="flex flex-col">
          
            <a
              class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/posts/advent-of-sql-2025-day-12/">
              <span class="leading-6">
                <span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Advent of SQL 2025 Day 12: Archive Flight Records
              </span>
            </a>
            
              <span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-12-27T15:30:00&#43;05:30">December 27, 2025</time>
              </span>
            
          
        </span>
        <span class="flex flex-col items-end">
          
            <a
              class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/posts/advent-of-sql-2025-day-14/">
              <span class="leading-6">
                Advent of SQL 2025 Day 14: Ski Resort Paths&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
              </span>
            </a>
            
              <span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-12-28T15:30:00&#43;05:30">December 28, 2025</time>
              </span>
            
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2026
          Meet Gor
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
      </p>
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
