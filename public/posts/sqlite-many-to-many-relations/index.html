<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="light"
  data-auto-appearance="true"><head>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en-us">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>SQLite SQL: Many to Many Relations &middot; Notes</title>
    <meta name="title" content="SQLite SQL: Many to Many Relations &middot; Notes">
  

  
  
    <meta name="description" content="A collection of technical notes and posts">
  
  
    <meta name="keywords" content="sqlite,sql,">
  
  
  
  <link rel="canonical" href="/posts/sqlite-many-to-many-relations/">
  

  
  
    <meta name="author" content="Meet Gor">
  
  

  
  <meta property="og:url" content="/posts/sqlite-many-to-many-relations/">
  <meta property="og:site_name" content="Notes">
  <meta property="og:title" content="SQLite SQL: Many to Many Relations">
  <meta property="og:description" content="Many to Many Relations # We have seen one-to-many relationship and also the self-join relationship.
Let’s extend it with many-to-many relationship. Here one row can refer to many other rows, but that other row can also be referred by multiple rows.
That was confusing, let’s take the simple example of users and posts as usual.
In One-To-Many relation, one post can only be written by one user. However, one user can author multiple posts. In Many-To-Many relation, one user can author multiple posts and one post can be written by multiple users. That is the distinction, it is not about the relation, it is more about the design that your system needs.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-09-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2026-01-04T15:32:35+05:30">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="SQLite SQL: Many to Many Relations">
  <meta name="twitter:description" content="Many to Many Relations # We have seen one-to-many relationship and also the self-join relationship.
Let’s extend it with many-to-many relationship. Here one row can refer to many other rows, but that other row can also be referred by multiple rows.
That was confusing, let’s take the simple example of users and posts as usual.
In One-To-Many relation, one post can only be written by one user. However, one user can author multiple posts. In Many-To-Many relation, one user can author multiple posts and one post can be written by multiple users. That is the distinction, it is not about the relation, it is more about the design that your system needs.">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.c61736128cfa071f52268b924e8b8c8dff7f9e962caae1e812053e9e023a4e1c1c95239d517406a4002933de9dd5ad84667956aa9d4230a25024e7e502058ca1.css"
    integrity="sha512-xhc2Eoz6Bx9SJouSTouMjf9/npYsquHoEgU&#43;ngI6ThwclSOdUXQGpAApM96d1a2EZnlWqp1CMKJQJOflAgWMoQ==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.67624a357c928d29b9fe19ba01a1e32c05ad1329ca2a712bf10446df0c6872903d0c14b21f76896b57a5a0710940805416cee38851d9067db6555881188e35a5.js"
      integrity="sha512-Z2JKNXySjSm5/hm6AaHjLAWtEynKKnEr8QRG3wxocpA9DBSyH3aJa1eloHEJQIBUFs7jiFHZBn22VViBGI41pQ=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  








  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "SQLite SQL: Many to Many Relations",
    "headline": "SQLite SQL: Many to Many Relations",
    
    "inLanguage": "en-us",
    "url" : "/posts/sqlite-many-to-many-relations/",
    "author" : {
      "@type": "Person",
      "name": "Meet Gor"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-09-18T00:00:00\u002b00:00",
    "datePublished": "2025-09-18T00:00:00\u002b00:00",
    
    "dateModified": "2026-01-04T15:32:35\u002b05:30",
    
    "keywords": ["sqlite","sql"],
    
    "mainEntityOfPage": "true",
    "wordCount": "2182"
  }]
  </script>



  
  
    




  

  
  

  
  

  
  

  
  
</head>


















  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral bf-scrollbar">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      <div class="main-menu flex items-center w-full gap-2 p-1 pl-0">
  
  
    <a href="/" class="text-base font-medium truncate min-w-0 shrink">
      Notes
    </a>
  
  <div class="flex items-center ms-auto">
    <div class="hidden md:flex">
      <nav class="flex items-center gap-x-5 h-12">
  
    
      
  
    <a
      href="/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="Home"
      title="">
      
      
        <span class="text-base font-medium break-normal">
          Home
        </span>
      
    </a>
  

    
      
  
    <a
      href="/posts/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="Posts"
      title="">
      
      
        <span class="text-base font-medium break-normal">
          Posts
        </span>
      
    </a>
  

    
      
  
    <a
      href="/tags/"
      
      class="flex items-center bf-icon-color-hover"
      aria-label="Tags"
      title="">
      
      
        <span class="text-base font-medium break-normal">
          Tags
        </span>
      
    </a>
  

    
  

  

  

  
    <button
      id="search-button"
      aria-label="Search"
      class="text-base bf-icon-color-hover"
      title="Search (/)">
      <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
    </button>
  

  
    <div class="flex items-center">
      <button
        id="appearance-switcher"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base bf-icon-color-hover">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    </div>
  
</nav>



    </div>
    <div class="flex md:hidden">
      <div class="flex items-center h-14 gap-4">
  
    <button
      id="search-button-mobile"
      aria-label="Search"
      class="flex items-center justify-center bf-icon-color-hover"
      title="Search (/)">
      <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
    </button>
  

  
    <button
      id="appearance-switcher-mobile"
      type="button"
      aria-label="Dark mode switcher"
      class="flex items-center justify-center text-neutral-900 hover:text-primary-600 dark:text-neutral-200 dark:hover:text-primary-400">
      <div class="dark:hidden">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
      </div>
      <div class="hidden dark:block">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
      </div>
    </button>
  

  
    <input type="checkbox" id="mobile-menu-toggle" autocomplete="off" class="hidden peer">
    <label for="mobile-menu-toggle" class="flex items-center justify-center cursor-pointer bf-icon-color-hover">
      <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
    </label>

    <div
      role="dialog"
      aria-modal="true"
      style="scrollbar-gutter: stable;"
      class="fixed inset-0 z-50 invisible overflow-y-auto px-6 py-20 opacity-0 transition-[opacity,visibility] duration-300 peer-checked:visible peer-checked:opacity-100 bg-neutral-50/97 dark:bg-neutral-900/99
      bf-scrollbar">
      <label
        for="mobile-menu-toggle"
        class="fixed end-8 top-5 flex items-center justify-center z-50 h-12 w-12 cursor-pointer select-none rounded-full bf-icon-color-hover border bf-border-color bf-border-color-hover bg-neutral-50 dark:bg-neutral-900">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </label>
      <nav class="mx-auto max-w-md space-y-6">
        
  
    
    <div class="px-2">
      <a
        href="/"
        aria-label="Home"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="" class="text-2xl font-bold tracking-tight">
          Home
        </span>
        
      </a>

      
    </div>
  
    
    <div class="px-2">
      <a
        href="/posts/"
        aria-label="Posts"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="" class="text-2xl font-bold tracking-tight">
          Posts
        </span>
        
      </a>

      
    </div>
  
    
    <div class="px-2">
      <a
        href="/tags/"
        aria-label="Tags"
        
        class="flex items-center gap-4 group bf-icon-color-hover text-neutral-700 dark:text-neutral-200">
        
        <span title="" class="text-2xl font-bold tracking-tight">
          Tags
        </span>
        
      </a>

      
    </div>
  

        
  

        
  

      </nav>
    </div>
  
</div>







    </div>
  </div>
</div>





    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        SQLite SQL: Many to Many Relations
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-09-18T00:00:00&#43;00:00">September 18, 2025</time><span class="px-2 text-primary-500">&middot;</span><span>2182 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">11 mins</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Meet Gor
      </div>
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

  

  

  
    <div class="mb-5"></div>
  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      


      <div class="min-w-0 min-h-0 max-w-fit">
        
        <div class="article-content max-w-prose mb-20">
          
<h2 class="relative group">Many to Many Relations
    <div id="many-to-many-relations" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#many-to-many-relations" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>We have seen <a href="https://www.meetgor.com/sqlog/sqlite-one-to-many-foreign-key/"  target="_blank">one-to-many</a> relationship and also the <a href="https://www.meetgor.com/sqlog/sqlite-self-join-relations"  target="_blank">self-join</a> relationship.</p>
<p>Let&rsquo;s extend it with <code>many-to-many</code> relationship. Here one row can refer to many other rows, but that other row can also be referred by multiple rows.</p>
<p>That was confusing, let&rsquo;s take the simple example of <code>users</code> and <code>posts</code> as usual.</p>
<ul>
<li>In <code>One-To-Many</code> relation, one post can only be written by one user. However, one user can author multiple posts.</li>
<li>In <code>Many-To-Many</code> relation, one user can author multiple posts and one post can be written by multiple users.</li>
</ul>
<p>That is the distinction, it is not about the relation, it is more about the design that your system needs.</p>
<p>Let&rsquo;s start creating one simple example:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> users (
</span></span><span style="display:flex;"><span>    id INTEGER <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>    name TEXT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> posts (
</span></span><span style="display:flex;"><span>    id INTEGER <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>    title TEXT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    content TEXT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>);</span></span></code></pre></div></div>
<p>We have created two tables, <code>users</code> and <code>posts</code> each representing their own data. However, we haven&rsquo;t referenced the users from the posts table, because that might not work out well.</p>
<p>Why?<br>
Well, there are few considerations in a <code>many-to-many</code> relationship.</p>
<ul>
<li>In a <code>one-to-many</code> relation, we could simply add a <code>user_id</code> column in posts. That works because each post has exactly one author.</li>
<li>But in a <code>many-to-many</code> relation, a single post can have multiple authors. If we put a <code>user_id</code> inside posts, we’d be forced to choose only one user, right?</li>
</ul>
<p>What if we tried multiple columns like <code>user_id_1</code>, <code>user_id_2</code> and so on?<br>
You can see that won&rsquo;t work or rather create a lot of confusion and redundancy. What if a post has 4 authors? Or 6? Not practical but could be an exception.</p>
<p>When we say, <code>many-to-many</code> we truly have to mean  <code>MANY</code> posts can be written by <code>ONE</code> author and <code>MANY</code> authors can write one <code>post</code>.</p>
<p>This is where we need to create a separate table usually called as the junction or an association table. There are <a href="https://en.wikipedia.org/wiki/Associative_entity"  target="_blank">other</a> names too.</p>
<p>For this we can create a table <code>author_post</code> (not the best of names but it&rsquo;s usually the table and it&rsquo;s relation as the name). This table will refer the <code>PRIMARY KEY</code>s of both the <code>users</code> and the <code>posts</code> table to map it to a single <code>post</code>, and the <code>PRIMARY KEY</code> of this table becomes the combinational pair of those two primary keys.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> author_post (
</span></span><span style="display:flex;"><span>    user_id INTEGER <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    post_id INTEGER <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (user_id, post_id),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (user_id) <span style="color:#66d9ef">REFERENCES</span> users(id),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (post_id) <span style="color:#66d9ef">REFERENCES</span> posts(id)
</span></span><span style="display:flex;"><span>);</span></span></code></pre></div></div>
<p>Here, the <code>user_id</code> and <code>post_id</code> are the <code>PRIMARY KEY</code>s of the <code>users</code> and the <code>posts</code> table respectively, however those are the <code>FOREIGN KEY</code>s for this <code>author_post</code> table. The <code>PRIMARY KEY</code> of the <code>author_post</code> table becomes, the combination of both <code>user_id</code> and <code>post_id</code> as <code>PRIMARY KEY(user_id, post_id)</code>.</p>
<p>Let&rsquo;s take a example to make it clear as usual:</p>
<p>Let&rsquo;s say <code>Pekka</code>(sir) is writing very technical details in a post and <code>Glauber</code> (sir) is writing the practical details in a post, both are important.They write individual posts, both of them have their audiences on the same blog. But, there is a topic they want to write together, how can they co-author a <code>posts</code> with the previous design of <code>one-to-many</code> relation?</p>
<p>In the case of <code>one-to-many</code> relation, the <code>users</code> let&rsquo;s say <code>Pekka</code> with <code>id</code> as <code>3</code> and <code>Glauber</code> as <code>id</code> with <code>1</code>.  They wrote their own posts with id <code>98</code> and <code>99</code> respectively. Now, for the <code>100</code> th <code>post</code> they want to write it together. If we create a <code>posts</code> record with the <code>author_id</code> as <code>3</code>, then it will just refer the user with the id <code>3</code> which is <code>Pekka</code>, then the user with <code>id</code> as <code>1</code> can&rsquo;t be referred to the <code>posts</code> record.</p>
<p>If we tried to create 2 posts with different <code>user_id</code> it might be redundant to create 2 posts, and those might lead to inconsistent number of post counts, since each post will have unique identifier.</p>
<p>So, essentially, co-authoring in this <code>one-to-many</code> relationship, is not possible, we need to do something to make them write together.</p>
<p>The <code>many-to-many</code> relation will help them write a <code>post</code> together.</p>
<p>They both can write the <code>posts</code> record with just the <code>title</code> and <code>content</code>. Let&rsquo;s say the <code>post</code> was created with <code>id</code> as <code>100</code></p>
<p>Them, while publishing the <code>post</code>, they can provide the <code>user_id</code>s, so here, two records of <code>author_post</code> will be created, one with <code>user_id</code> as <code>3</code>and <code>post_id</code> as <code>100</code>, similarly another record will be created with <code>user_id</code> as <code>1</code> and <code>post_id</code> as <code>100</code>. Notice how we are duplicating the <code>post_id</code> (it is same, as <code>100</code>), but the <code>user_id</code> is different in each case. Hence the constraint is satisfied, the <code>user_id</code> and <code>post_id</code> the combination of those two is unique. Hence those two can write a <code>post</code> together now, the <code>100</code> th post is co-authored by <code>Pekka</code> and <code>Glauber</code>.</p>
<p>And finally <code>Pekka</code> and <code>Glauber</code> decided to write a <a href="https://turso.tech/blog/introducing-limbo-a-complete-rewrite-of-sqlite-in-rust"  target="_blank">post</a></p>
<p>NOTE: This is just a made up example, I found it easier to relate and come up with a example of the similar blog post kind of table, so took that and wrote this, sorry if anyone got hurt.</p>
<p>Let&rsquo;s look at actual queries:</p>
<p>Create three users <code>Glauber</code>, <code>Jamie</code> and <code>Pekka</code>.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> users(name) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Glauber&#39;</span>), (<span style="color:#e6db74">&#39;Jamie&#39;</span>), (<span style="color:#e6db74">&#39;Pekka&#39;</span>);</span></span></code></pre></div></div>
<p>These users are the authors with the ids <code>1</code>, <code>2</code> and <code>3</code> respectively.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> users;</span></span></code></pre></div></div>
<p>As we can see in this users table.</p>
<p>Then, let&rsquo;s Pekka write the posts. He wrote 2 posts, one with the title <code>Switching to Zig from Rust</code> and the other with the title <code>RAG in SQLite</code>.<br>
This is just for fun.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Switching to Zig from Rust&#39;</span>, <span style="color:#e6db74">&#39;I love C&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;RAG in SQLite&#39;</span>, <span style="color:#e6db74">&#39;AI first database&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> posts;</span></span></code></pre></div></div>
<p>Here, the <code>id</code> of the first post is <code>1</code> and the <code>id</code> of the second post is <code>2</code>. So, <code>Pekka</code> has authored posts with id <code>1</code> and <code>2</code> but that is not mapped yet.</p>
<p>Let&rsquo;s map it in the <code>author_post</code> table, we know that the <code>PRIMARY KEY</code> for the <code>author_post</code> is a combination of <code>user_id</code> or <code>author_id</code> and the <code>post_id</code>, we know that <code>Pekka</code> has a <code>user_id</code> of <code>3</code> and he has written the <code>post</code> with <code>id</code>s <code>1</code> and <code>2</code>, so we&rsquo;ll simply insert those in to the <code>author_post</code> table as individual records.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>);</span></span></code></pre></div></div>
<p>This will create two distinct records rightly so, for each posts.</p>
<p>Then, Glauber decided to write a couple of posts. Let&rsquo;s say he wrote 2 posts, one with the title <code>Rewriting SQLite</code> and the other with the title <code>Offline Writes in SQLite</code>.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Rewriting SQLite&#39;</span>, <span style="color:#e6db74">&#39;We are no more a sqlite-fork&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Offline Writes in SQLite&#39;</span>, <span style="color:#e6db74">&#39;Lets sync&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> posts;</span></span></code></pre></div></div>
<p>Here, the posts created by <code>Glauber</code> have ids <code>3</code> and <code>4</code>. Now, we need to map them in the <code>author_post</code> table.</p>
<p>We know that <code>Glauber</code> has a <code>user_id</code> of <code>1</code> and he has written the <code>post</code> with <code>id</code>s <code>3</code> and <code>4</code>, so we&rsquo;ll simply insert those in to the <code>author_post</code> table as individual records.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>), (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>);</span></span></code></pre></div></div>
<p>So, this will create two distinct entries in the <code>author_post</code> table for the two posts created by <code>users</code> with <code>id</code> as <code>1</code>.</p>
<p>Now, the question of how they co-author a post? That is a piece of cake.</p>
<p>Let&rsquo;s say they wrote a post with the title <code>Limbo</code>.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span>(<span style="color:#e6db74">&#39;Limbo&#39;</span>, <span style="color:#e6db74">&#39;SQLite in Rust&#39;</span>);</span></span></code></pre></div></div>
<p>Now, this will create a new post with <code>id</code> as <code>5</code>, let&rsquo;s map it in the <code>author_post</code> table</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>);</span></span></code></pre></div></div>
<p>Here, we create two records but the <code>post_id</code> value is the same, the <code>user_id</code> value changes for both the posts, one for <code>Glauber</code> and one for <code>Pekka</code> with ids 1 and 3 respectively.</p>
<p>SQueaLicios!</p>
<p>Now, you will say, isn&rsquo;t it still doing redundant insertions of two <code>author_post</code> records?</p>
<p>Well &hellip; yes &hellip; but.</p>
<p>Yes, that is true, it looks like we are doing redundant as we will create records in the <code>author_post</code> table (let&rsquo;s call it the junction table or the middle or connector table). But there is no redundant data, every row gives us unique insight into what it is actually storing. We aren&rsquo;t storing the original <code>posts</code> record twice or multiple twice, we are just <code>referencing</code> it with the <code>user_id</code> and the <code>post_id</code></p>
<p>Another question would be, how the heck do we query this <code>post</code> which is co-authored? Or that has multiple authors in it, easy peasy, sqly.</p>
<p>Bear with some SQL shenanigans, some joins and wizardry.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> 
</span></span><span style="display:flex;"><span>    p.id,
</span></span><span style="display:flex;"><span>    p.content <span style="color:#66d9ef">AS</span> post,
</span></span><span style="display:flex;"><span>    GROUP_CONCAT(u.name, <span style="color:#e6db74">&#39;, &#39;</span>) <span style="color:#66d9ef">AS</span> authors
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> posts p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> author_post up <span style="color:#66d9ef">ON</span> p.id <span style="color:#f92672">=</span> up.post_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> users u <span style="color:#66d9ef">ON</span> u.id <span style="color:#f92672">=</span> up.user_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> p.id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">COUNT</span>(u.id) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>;</span></span></code></pre></div></div>
<p>Don&rsquo;t worry if you don&rsquo;t get this query as a whole, just understand three things.</p>
<ul>
<li>What are we querying? The post id, the post content, and the author names concatenated with <code>,</code></li>
<li>From where? The <code>posts</code>, <code>users</code> and the <code>author_post</code> table.</li>
<li>How? Querying all the posts, joining the <code>posts</code> with the id in the <code>author_post</code> table, then also fetching the <code>name</code> of the <code>author</code> from the <code>users</code> name. We are grouping by post id in order to keep it per post, and not duplicate the posts in case of multiple authors, the last filtering is the <code>HAVING</code> that is done as a aggregate of the count of users in the <code>author_post</code> table having more than one author in the mapping.</li>
</ul>
<p>What about all the posts?</p>
<p>We just remove the filter of <code>HAVING</code> clause to include all the posts, rather than only posts having more than 1 author.</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    p.id,
</span></span><span style="display:flex;"><span>    p.content <span style="color:#66d9ef">AS</span> post,
</span></span><span style="display:flex;"><span>    GROUP_CONCAT(u.name, <span style="color:#e6db74">&#39;, &#39;</span>) <span style="color:#66d9ef">AS</span> authors
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> posts p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> author_post up <span style="color:#66d9ef">ON</span> p.id <span style="color:#f92672">=</span> up.post_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> users u <span style="color:#66d9ef">ON</span> u.id <span style="color:#f92672">=</span> up.user_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> p.id;</span></span></code></pre></div></div>
<p>The heavy SQLog:</p>
<div class="highlight-wrapper"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> users (
</span></span><span style="display:flex;"><span>    id INTEGER <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>    name TEXT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> posts (
</span></span><span style="display:flex;"><span>    id INTEGER <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>    title TEXT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    content TEXT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> author_post (
</span></span><span style="display:flex;"><span>    user_id INTEGER <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    post_id INTEGER <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (user_id, post_id),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (user_id) <span style="color:#66d9ef">REFERENCES</span> users(id),
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FOREIGN</span> <span style="color:#66d9ef">KEY</span> (post_id) <span style="color:#66d9ef">REFERENCES</span> posts(id)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> .<span style="color:#66d9ef">mode</span> <span style="color:#66d9ef">table</span>
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> users(name) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Glauber&#39;</span>), (<span style="color:#e6db74">&#39;Jamie&#39;</span>), (<span style="color:#e6db74">&#39;Pekka&#39;</span>);
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Switching to Zig from Rust&#39;</span>, <span style="color:#e6db74">&#39;I love C&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;RAG in SQLite&#39;</span>, <span style="color:#e6db74">&#39;AI first database&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> posts;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+-------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span>           title            <span style="color:#f92672">|</span>      content      <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+-------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>  <span style="color:#f92672">|</span> Switching <span style="color:#66d9ef">to</span> Zig <span style="color:#66d9ef">from</span> Rust <span style="color:#f92672">|</span> I love <span style="color:#66d9ef">C</span>          <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>  <span style="color:#f92672">|</span> RAG <span style="color:#66d9ef">in</span> SQLite              <span style="color:#f92672">|</span> AI <span style="color:#66d9ef">first</span> <span style="color:#66d9ef">database</span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+-------------------+
</span></span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Rewriting SQLite&#39;</span>, <span style="color:#e6db74">&#39;We are no more a sqlite-fork&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span> (<span style="color:#e6db74">&#39;Offline Writes in SQLite&#39;</span>, <span style="color:#e6db74">&#39;Lets sync&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> posts;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span>           title            <span style="color:#f92672">|</span>           content            <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>  <span style="color:#f92672">|</span> Switching <span style="color:#66d9ef">to</span> Zig <span style="color:#66d9ef">from</span> Rust <span style="color:#f92672">|</span> I love <span style="color:#66d9ef">C</span>                     <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>  <span style="color:#f92672">|</span> RAG <span style="color:#66d9ef">in</span> SQLite              <span style="color:#f92672">|</span> AI <span style="color:#66d9ef">first</span> <span style="color:#66d9ef">database</span>            <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">3</span>  <span style="color:#f92672">|</span> Rewriting SQLite           <span style="color:#f92672">|</span> We <span style="color:#66d9ef">are</span> <span style="color:#66d9ef">no</span> <span style="color:#66d9ef">more</span> a sqlite<span style="color:#f92672">-</span>fork <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">4</span>  <span style="color:#f92672">|</span> Offline Writes <span style="color:#66d9ef">in</span> SQLite   <span style="color:#f92672">|</span> Lets sync                    <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+------------------------------+
</span></span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>), (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> posts(title, content) <span style="color:#66d9ef">VALUES</span>(<span style="color:#e6db74">&#39;Limbo&#39;</span>, <span style="color:#e6db74">&#39;SQLite in Rust&#39;</span>);
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> author_post(user_id, post_id) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    p.id,
</span></span><span style="display:flex;"><span>    p.content <span style="color:#66d9ef">AS</span> post,
</span></span><span style="display:flex;"><span>    GROUP_CONCAT(u.name, <span style="color:#e6db74">&#39;, &#39;</span>) <span style="color:#66d9ef">AS</span> authors
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> posts p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> author_post up <span style="color:#66d9ef">ON</span> p.id <span style="color:#f92672">=</span> up.post_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> users u <span style="color:#66d9ef">ON</span> u.id <span style="color:#f92672">=</span> up.user_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> p.id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">COUNT</span>(u.id) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------+----------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span>      post      <span style="color:#f92672">|</span>    authors     <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------+----------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">5</span>  <span style="color:#f92672">|</span> SQLite <span style="color:#66d9ef">in</span> Rust <span style="color:#f92672">|</span> Pekka, Glauber <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------+----------------+
</span></span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> posts;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span>           title            <span style="color:#f92672">|</span>           content            <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+------------------------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>  <span style="color:#f92672">|</span> Switching <span style="color:#66d9ef">to</span> Zig <span style="color:#66d9ef">from</span> Rust <span style="color:#f92672">|</span> I love <span style="color:#66d9ef">C</span>                     <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>  <span style="color:#f92672">|</span> RAG <span style="color:#66d9ef">in</span> SQLite              <span style="color:#f92672">|</span> AI <span style="color:#66d9ef">first</span> <span style="color:#66d9ef">database</span>            <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">3</span>  <span style="color:#f92672">|</span> Rewriting SQLite           <span style="color:#f92672">|</span> We <span style="color:#66d9ef">are</span> <span style="color:#66d9ef">no</span> <span style="color:#66d9ef">more</span> a sqlite<span style="color:#f92672">-</span>fork <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">4</span>  <span style="color:#f92672">|</span> Offline Writes <span style="color:#66d9ef">in</span> SQLite   <span style="color:#f92672">|</span> Lets sync                    <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">5</span>  <span style="color:#f92672">|</span> Limbo                      <span style="color:#f92672">|</span> SQLite <span style="color:#66d9ef">in</span> Rust               <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+----------------------------+------------------------------+
</span></span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>    p.id,
</span></span><span style="display:flex;"><span>    p.content <span style="color:#66d9ef">AS</span> post,
</span></span><span style="display:flex;"><span>    GROUP_CONCAT(u.name, <span style="color:#e6db74">&#39;, &#39;</span>) <span style="color:#66d9ef">AS</span> authors
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> posts p
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> author_post up <span style="color:#66d9ef">ON</span> p.id <span style="color:#f92672">=</span> up.post_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> users u <span style="color:#66d9ef">ON</span> u.id <span style="color:#f92672">=</span> up.user_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> p.id;
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+------------------------------+----------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> id <span style="color:#f92672">|</span>             post             <span style="color:#f92672">|</span>    authors     <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+------------------------------+----------------+
</span></span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span>  <span style="color:#f92672">|</span> I love <span style="color:#66d9ef">C</span>                     <span style="color:#f92672">|</span> Pekka          <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span>  <span style="color:#f92672">|</span> AI <span style="color:#66d9ef">first</span> <span style="color:#66d9ef">database</span>            <span style="color:#f92672">|</span> Pekka          <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">3</span>  <span style="color:#f92672">|</span> We <span style="color:#66d9ef">are</span> <span style="color:#66d9ef">no</span> <span style="color:#66d9ef">more</span> a sqlite<span style="color:#f92672">-</span>fork <span style="color:#f92672">|</span> Glauber        <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">4</span>  <span style="color:#f92672">|</span> Lets sync                    <span style="color:#f92672">|</span> Glauber        <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#ae81ff">5</span>  <span style="color:#f92672">|</span> SQLite <span style="color:#66d9ef">in</span> Rust               <span style="color:#f92672">|</span> Pekka, Glauber <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">+</span><span style="color:#75715e">----+------------------------------+----------------+
</span></span></span><span style="display:flex;"><span>sqlite<span style="color:#f92672">&gt;</span></span></span></code></pre></div></div>
<p>That’s the basic idea of a many-to-many relation in SQLite, instead of stuffing multiple IDs into one table, we create a separate mapping table. Each row in that table ties one user to one post. If multiple users are tied to the same post, we just add more mapping rows.</p>

          
          
          
        </div>
        
        
        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_posts/2025-09-18-many-to-many-relations.md"
          data-oid-likes="likes_posts/2025-09-18-many-to-many-relations.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span class="flex flex-col">
          
            <a
              class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/posts/sqlite-self-join-relations/">
              <span class="leading-6">
                <span class="inline-block rtl:rotate-180">&larr;</span>&ensp;SQLite SQL: Self Join Relations
              </span>
            </a>
            
              <span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-09-17T00:00:00&#43;00:00">September 17, 2025</time>
              </span>
            
          
        </span>
        <span class="flex flex-col items-end">
          
            <a
              class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/posts/sqlite-one-to-one-relations/">
              <span class="leading-6">
                SQLite SQL: One to One Relations&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
              </span>
            </a>
            
              <span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-09-19T00:00:00&#43;00:00">September 19, 2025</time>
              </span>
            
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2026
          Meet Gor
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
      </p>
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
